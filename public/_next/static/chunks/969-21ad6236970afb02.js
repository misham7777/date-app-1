"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[969],{5016:(e,r,t)=>{t.d(r,{cn:()=>o});var s=t(2821),n=t(5889);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.QP)((0,s.$)(r))}},6170:(e,r,t)=>{t.d(r,{p:()=>a});var s=t(5155),n=t(2115),o=t(5016);let a=n.forwardRef((e,r)=>{let{className:t,type:n,...a}=e;return(0,s.jsx)("input",{type:n,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...a})});a.displayName="Input"},7003:(e,r,t)=>{t.d(r,{$:()=>d});var s=t(5155),n=t(2115),o=t(2467),a=t(3101),i=t(5016);let c=(0,a.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,r)=>{let{className:t,variant:n,size:a,asChild:d=!1,...l}=e,u=d?o.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(c({variant:n,size:a,className:t})),ref:r,...l})});d.displayName="Button"},8593:(e,r,t)=>{t.d(r,{IJ:()=>c,ND:()=>s,ZV:()=>a,_I:()=>l,oe:()=>i,wS:()=>u,xj:()=>d});let s=(0,t(5040).UU)("https://xyfccngjyuoqsjhxrllg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh5ZmNjbmdqeXVvcXNqaHhybGxnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxMzQwNDMsImV4cCI6MjA3MTcxMDA0M30.BJ83sUcv6A3xGruWqFi3tL0rzXuRakE3U0ilQbgLXeo");class n{getOrCreateSessionId(){let e=localStorage.getItem("quiz_session_id");return e||(e="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),localStorage.setItem("quiz_session_id",e)),e}async createQuizSession(e){let r={session_id:this.sessionId,ip_address:e.ip_address,user_agent:e.user_agent||window.navigator.userAgent,referrer:e.referrer||document.referrer,total_steps:e.total_steps||4,current_step:e.current_step||1,...e},{data:t,error:n}=await s.from("quiz_sessions").insert([r]).select().single();return n?(console.error("Error creating quiz session:",n),this.sessionId):(null==t?void 0:t.id)||this.sessionId}async trackQuizAnswer(e){let r={...e,session_id:this.sessionId},{error:t}=await s.from("quiz_answers").insert([r]);t&&console.error("Error tracking quiz answer:",t)}async trackPageView(e,r,t){let n={session_id:this.sessionId,page_path:e,page_title:r||document.title,time_spent_seconds:t},{error:o}=await s.from("page_views").insert([n]);o&&console.error("Error tracking page view:",o)}async trackInteraction(e){let r={...e,session_id:this.sessionId,page_path:e.page_path||window.location.pathname},{error:t}=await s.from("user_interactions").insert([r]);t&&console.error("Error tracking interaction:",t)}async trackPaymentAttempt(e){let r={...e,session_id:this.sessionId},{error:t}=await s.from("payment_attempts").insert([r]);t&&console.error("Error tracking payment attempt:",t)}async trackLoadingEvent(e){let r={...e,session_id:this.sessionId},{error:t}=await s.from("loading_screen_events").insert([r]);t&&console.error("Error tracking loading event:",t)}async trackDeviceInfo(){let e={session_id:this.sessionId,browser:this.getBrowserInfo(),browser_version:this.getBrowserVersion(),operating_system:this.getOperatingSystem(),device_type:this.getDeviceType(),screen_resolution:"".concat(screen.width,"x").concat(screen.height),viewport_size:"".concat(window.innerWidth,"x").concat(window.innerHeight),language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},{error:r}=await s.from("device_info").insert([e]);r&&console.error("Error tracking device info:",r)}async trackFunnelStep(e){let r={...e,session_id:this.sessionId},{error:t}=await s.from("conversion_funnel").insert([r]);t&&console.error("Error tracking funnel step:",t)}async updateQuizSession(e){let{error:r}=await s.from("quiz_sessions").update(e).eq("session_id",this.sessionId);r&&console.error("Error updating quiz session:",r)}getBrowserInfo(){let e=navigator.userAgent;return e.includes("Chrome")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")?"Safari":e.includes("Edge")?"Edge":"Unknown"}getBrowserVersion(){let e=navigator.userAgent.match(/(chrome|firefox|safari|edge)\/(\d+)/i);return e?e[2]:"Unknown"}getOperatingSystem(){let e=navigator.userAgent;return e.includes("Windows")?"Windows":e.includes("Mac")?"macOS":e.includes("Linux")?"Linux":e.includes("Android")?"Android":e.includes("iOS")?"iOS":"Unknown"}getDeviceType(){let e=navigator.userAgent;return e.includes("Mobile")?"mobile":e.includes("Tablet")||e.includes("iPad")?"tablet":"desktop"}getSessionId(){return this.sessionId}constructor(){this.sessionId=this.getOrCreateSessionId()}}let o=new n,a=e=>o.trackQuizAnswer(e),i=(e,r,t)=>o.trackPageView(e,r,t),c=e=>o.trackInteraction(e),d=e=>o.trackPaymentAttempt(e),l=e=>o.trackLoadingEvent(e),u=e=>o.trackFunnelStep(e)},9235:(e,r,t)=>{t.d(r,{Ar:()=>a,Do:()=>o,JY:()=>d,Ml:()=>u,WF:()=>c,oW:()=>i,zv:()=>l});var s=t(8593);class n{getOrCreateSessionId(){let e=localStorage.getItem("search_session_id");return e||(e="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),localStorage.setItem("search_session_id",e)),e}getDeviceInfo(){return{user_agent:navigator.userAgent,referrer:document.referrer,utm_source:new URLSearchParams(window.location.search).get("utm_source"),utm_medium:new URLSearchParams(window.location.search).get("utm_medium"),utm_campaign:new URLSearchParams(window.location.search).get("utm_campaign")}}async trackSearch(e){try{let r=this.getDeviceInfo(),{data:t,error:n}=await s.ND.from("searches").insert([{session_id:e.session_id,name:e.name,email:e.email,search_type:e.search_type||"partner",source_page:e.source_page||"home",user_agent:e.user_agent||r.user_agent,referrer:e.referrer||r.referrer,utm_source:e.utm_source||r.utm_source,utm_medium:e.utm_medium||r.utm_medium,utm_campaign:e.utm_campaign||r.utm_campaign,current_step:1,total_steps:3,started_at:new Date().toISOString(),last_activity_at:new Date().toISOString()}]).select("id").single();if(n)return console.error("Error tracking search:",n),null;return t.id}catch(e){return console.error("Error tracking search:",e),null}}async updateSearchSession(e){try{let{error:r}=await s.ND.from("searches").update({current_step:e.current_step,last_activity_at:new Date().toISOString(),completed_at:e.completed_at,dropped_off_at:e.dropped_off_at,drop_off_step:e.drop_off_step,drop_off_reason:e.drop_off_reason,is_completed:e.is_completed}).eq("session_id",this.sessionId);if(r)return console.error("Error updating search session:",r),!1;return!0}catch(e){return console.error("Error updating search session:",e),!1}}async trackSearchAnswer(e){try{let{data:r}=await s.ND.from("searches").select("id").eq("session_id",this.sessionId).single(),{error:t}=await s.ND.from("search_answers").insert([{search_id:null==r?void 0:r.id,session_id:e.session_id,step_number:e.step_number,question_type:e.question_type,answer_data:e.answer_data}]);if(t)return console.error("Error tracking search answer:",t),!1;return await this.updateSearchSession({current_step:e.step_number+1,last_activity_at:new Date().toISOString()}),!0}catch(e){return console.error("Error tracking search answer:",e),!1}}async trackSearchDropOff(e){try{let{data:r}=await s.ND.from("searches").select("id").eq("session_id",this.sessionId).single(),t=this.getDeviceInfo(),{error:n}=await s.ND.from("search_drop_offs").insert([{search_id:null==r?void 0:r.id,session_id:e.session_id,step_number:e.step_number,step_name:e.step_name,drop_off_reason:e.drop_off_reason,time_spent_seconds:e.time_spent_seconds,user_agent:e.user_agent||t.user_agent,ip_address:e.ip_address}]);if(n)return console.error("Error tracking search drop-off:",n),!1;return await this.updateSearchSession({dropped_off_at:new Date().toISOString(),drop_off_step:e.step_number,drop_off_reason:e.drop_off_reason}),!0}catch(e){return console.error("Error tracking search drop-off:",e),!1}}async completeSearchSession(){try{let{error:e}=await s.ND.from("searches").update({is_completed:!0,completed_at:new Date().toISOString(),last_activity_at:new Date().toISOString()}).eq("session_id",this.sessionId);if(e)return console.error("Error completing search session:",e),!1;return!0}catch(e){return console.error("Error completing search session:",e),!1}}async getSearchFunnelAnalytics(e){try{let{data:r,error:t}=await s.ND.from("search_funnel_analytics").select("*").gte("date",e.start).lte("date",e.end).order("date",{ascending:!1});if(t)return console.error("Error getting search funnel analytics:",t),null;return r}catch(e){return console.error("Error getting search funnel analytics:",e),null}}async getSearchDropOffAnalysis(e){try{let{data:r,error:t}=await s.ND.from("search_drop_offs").select("\n          *,\n          searches!inner(session_id, name, email)\n        ").gte("created_at",e.start).lte("created_at",e.end).order("created_at",{ascending:!1});if(t)return console.error("Error getting search drop-off analysis:",t),null;return r}catch(e){return console.error("Error getting search drop-off analysis:",e),null}}async getSearchesWithProgress(e){try{let{data:r,error:t}=await s.ND.from("searches").select("\n          *,\n          search_answers(*)\n        ").gte("created_at",e.start).lte("created_at",e.end).order("created_at",{ascending:!1});if(t)return console.error("Error getting searches with progress:",t),null;return r}catch(e){return console.error("Error getting searches with progress:",e),null}}async getAllSearches(){try{let{data:e,error:r}=await s.ND.from("searches").select("*").order("created_at",{ascending:!1});if(r)return console.error("Error getting all searches:",r),null;return e}catch(e){return console.error("Error getting all searches:",e),null}}constructor(){this.sessionId=this.getOrCreateSessionId()}}let o=new n,a=e=>o.trackSearch(e),i=e=>o.trackSearchAnswer(e),c=()=>o.completeSearchSession(),d=e=>o.getSearchFunnelAnalytics(e),l=e=>o.getSearchDropOffAnalysis(e),u=e=>o.getSearchesWithProgress(e)}}]);