(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{5707:(e,t,a)=>{Promise.resolve().then(a.bind(a,8754))},8754:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(5155),r=a(2115),n=a(5417),i=a(1408),l=a(7003),o=a(6170),c=a(7828),d=a(1873),m=a(6561),x=a(5229),u=a(2987),p=a(63),h=a(8593),g=a(9235);function b(){var e;let t=(0,p.useRouter)(),a=(0,p.useSearchParams)(),[b,j]=(0,r.useState)(1),[y]=(0,r.useState)(3),[f,v]=(0,r.useState)({name:"",age:"",location:"",photo:null,coordinates:{lat:52.153794,lng:21.078421}}),[N,w]=(0,r.useState)(!1),[_,S]=(0,r.useState)([]),[D,k]=(0,r.useState)(!1),[P,I]=(0,r.useState)("default"),[z,C]=(0,r.useState)(null),[E,A]=(0,r.useState)(0),[q,J]=(0,r.useState)(!1),[L,O]=(0,r.useState)(null),[G,R]=(0,r.useState)(!1),T=(0,r.useRef)(null),U=a.get("name")||"";a.get("searchType"),(0,r.useEffect)(()=>{U&&v(e=>({...e,name:U}))},[U]);let W=b/y*100,B="pk.eyJ1IjoiZnJlZGJrayIsImEiOiJjbTJqeWVkczIwYzE5MmpyMGp6OTY1ODgzIn0.MiNzEcVX_atB-tG6y3KQkw",V=async e=>{let t=e.target.value,a=parseInt(t),s=a>=18&&a<=99;v(e=>({...e,age:t})),w(s),s&&(await (0,h.ZV)({step_number:1,question_type:"age",answer_data:{age:a}}),await (0,g.oW)({session_id:g.Do.sessionId,step_number:1,question_type:"age",answer_data:{age:a}}))},Z=async e=>{let t=e.target.value;v(e=>({...e,location:t})),t.trim()&&(await (0,h.ZV)({step_number:2,question_type:"location",answer_data:{location:t.trim()}}),await (0,g.oW)({session_id:g.Do.sessionId,step_number:2,question_type:"location",answer_data:{location:t.trim()}}))},F=async()=>{await (0,h.IJ)({interaction_type:"button_press",element_id:"next-button",element_text:3===b?"Start Search":"Next"}),b<y?j(e=>e+1):await $()},M=async()=>{await (0,h.IJ)({interaction_type:"button_press",element_id:"back-button",element_text:"Back"}),b>1&&j(e=>e-1)},$=async()=>{await (0,h.IJ)({interaction_type:"form_submit",element_id:"quiz-submit",element_text:"Start Search"}),await g.Do.updateSearchSession({is_completed:!0,completed_at:new Date().toISOString(),current_step:y}),await (0,g.WF)();let e=new URLSearchParams({name:f.name,age:f.age,location:f.location,lat:f.coordinates.lat.toString(),lng:f.coordinates.lng.toString()});t.push("/loading?".concat(e.toString()))},H=async e=>{let t=["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)?e.size>0xa00000?"File size must be less than 10MB":null:"Please upload a valid image file (JPG, PNG, or WebP)";if(t)return void O(t);O(null),v(t=>({...t,photo:e}));let a=new FileReader;a.onload=e=>{var t;C(null==(t=e.target)?void 0:t.result)},a.readAsDataURL(e),await (0,h.ZV)({step_number:3,question_type:"photo",answer_data:{filename:e.name,size:e.size,type:e.type}}),await (0,g.oW)({session_id:g.Do.sessionId,step_number:3,question_type:"photo",answer_data:{filename:e.name,size:e.size,type:e.type}}),await (0,h.IJ)({interaction_type:"file_upload",element_id:"photo-upload",element_text:"Photo Upload"})};return(0,r.useEffect)(()=>{3===b&&(J(!0),setTimeout(()=>J(!1),500))},[f.coordinates,b]),(0,r.useEffect)(()=>{(async()=>{await g.Do.updateSearchSession({total_steps:y,current_step:b}),await (0,h.oe)("/quiz","Quiz - Relationship Intel"),await (0,h.wS)({funnel_step:"quiz_start",step_order:1,is_completed:!0})})()},[]),(0,r.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("name");e.get("searchType"),t&&(v(e=>({...e,name:t})),(0,h.ZV)({step_number:1,question_type:"name",answer_data:{name:t}}))},[]),(0,r.useEffect)(()=>{(0,h.wS)({funnel_step:1===b?"quiz_start":"quiz_complete",step_order:b,is_completed:b===y})},[b]),(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 font-sans",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-2xl font-bold text-gray-800 mb-3",children:[(0,s.jsx)(c.A,{className:"w-8 h-8 text-red-500"}),(0,s.jsx)("span",{children:"RELATIONSHIP INTEL"})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-3",children:(0,s.jsx)(n.P.div,{className:"bg-gradient-to-r from-red-500 to-orange-500 h-2 rounded-full",initial:{width:0},animate:{width:"".concat(W,"%")},transition:{duration:.5,ease:"easeOut"}})}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Step ",b," of ",y]})]})}),(0,s.jsxs)(n.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6",children:[(0,s.jsxs)(i.N,{mode:"wait",children:[1===b&&(0,s.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:["How old is ",f.name||"they","?"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.p,{type:"number",placeholder:"Enter his age",value:f.age,onChange:V,className:"h-12 text-lg pr-12 bg-gray-50 rounded-lg",min:"18",max:"99"}),(0,s.jsx)("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-xl",children:"\uD83D\uDC48"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Approximate age is fine"}),(0,s.jsx)("div",{className:"border-l-4 border-red-500 bg-red-50 p-3 rounded-r-lg",children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,s.jsx)("strong",{children:"Pro tip:"})," Our AI can find profiles with slight age variations."]})}),(0,s.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800 font-medium",children:["\uD83D\uDCA1 ",(0,s.jsx)("strong",{children:"89%"})," of people lie about their age on dating apps"]})})]})]},"step-1"),2===b&&(0,s.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Where are they located?"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.p,{type:"text",placeholder:"Enter city or address",value:f.location,onChange:Z,className:"h-12 text-lg pr-12"}),(0,s.jsx)(d.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]}),D&&_.length>0&&(0,s.jsx)("div",{className:"absolute z-10 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:_.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>(e=>{let[t,a]=e.center;v(s=>({...s,location:e.place_name,coordinates:{lat:a,lng:t}})),k(!1),J(!0)})(e),className:"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[(0,s.jsx)("div",{className:"font-medium text-gray-800",children:e.text}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.place_name})]},t))}),(0,s.jsxs)(l.$,{onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:a}=e.coords;v(e=>({...e,coordinates:{lat:t,lng:a}})),J(!0),fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(a,",").concat(t,".json?access_token=").concat(B,"&types=place,address&limit=1")).then(e=>e.json()).then(e=>{e.features&&e.features.length>0&&v(t=>({...t,location:e.features[0].place_name}))}).catch(e=>console.error("Error reverse geocoding:",e))},e=>{console.error("Error getting current position:",e),alert("Unable to get your current location. Please enter it manually.")}):alert("Geolocation is not supported by this browser.")},variant:"outline",className:"w-full h-12 flex items-center justify-center gap-2",children:[(0,s.jsx)(m.A,{className:"w-4 h-4"}),"Use my current position"]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"bg-gray-100 rounded-lg overflow-hidden shadow-sm",children:q?(0,s.jsx)("div",{className:"w-full h-48 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-gray-500",children:"Loading map..."})}):(0,s.jsx)("img",{src:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:14;return"https://api.mapbox.com/styles/v1/".concat("mapbox/streets-v12","/static/").concat(t,",").concat(e,",").concat(a,",0/900x900?access_token=").concat(B)}(f.coordinates.lat,f.coordinates.lng),alt:"Location map",className:"w-full h-48 object-cover",onLoad:()=>J(!1)})})}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Enter the city where ",f.name||"they"," are located."]}),(0,s.jsx)("div",{className:"border-l-4 border-red-500 bg-red-50 p-3 rounded-r-lg",children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,s.jsx)("strong",{children:"Pro tip:"})," Location helps us find profiles in the same area."]})}),(0,s.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800 font-medium",children:["\uD83D\uDCA1 ",(0,s.jsx)("strong",{children:"78%"})," prefer matches within 25 miles"]})})]})]},"step-2"),3===b&&(0,s.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Upload their photo"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Upload a clear photo for our AI to analyze."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{ref:T,type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];a&&H(a)},className:"hidden"}),z?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{src:z,alt:"Photo preview",className:"w-full h-48 object-cover rounded-lg"}),(0,s.jsx)("button",{onClick:()=>{v(e=>({...e,photo:null})),C(null),O(null),T.current&&(T.current.value="")},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-2 hover:bg-red-600 transition-colors",children:(0,s.jsx)(x.A,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:null==(e=f.photo)?void 0:e.name})]}):(0,s.jsxs)("div",{onClick:()=>{var e;return null==(e=T.current)?void 0:e.click()},onDrop:e=>{var t;e.preventDefault(),R(!1);let a=null==(t=e.dataTransfer.files)?void 0:t[0];a&&H(a)},onDragOver:e=>{e.preventDefault(),R(!0)},onDragLeave:e=>{e.preventDefault(),R(!1)},className:"\n                            border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-all duration-200\n                            ".concat(G?"border-blue-500 bg-blue-50":L?"border-red-500 bg-red-50":"border-gray-300 bg-gray-50 hover:border-gray-400 hover:bg-gray-100","\n                          "),children:[(0,s.jsx)("div",{className:"text-3xl mb-3",children:"\uD83D\uDCF7"}),(0,s.jsx)("p",{className:"text-lg font-medium text-gray-700 mb-2",children:G?"Drop photo here":"Drag & drop photo here or click to browse"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"JPG, PNG, WebP up to 10MB"})]}),L&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-2",children:L})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Best results with clear, front-facing photos."}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"text-green-500 mr-2",children:"✓"}),"Clear face visible"]}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"text-green-500 mr-2",children:"✓"}),"Good lighting"]}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"text-green-500 mr-2",children:"✓"}),"Front-facing preferred"]})]}),(0,s.jsx)("div",{className:"border-l-4 border-red-500 bg-red-50 p-3 rounded-r-lg",children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,s.jsx)("strong",{children:"Pro tip:"})," Our AI works with different angles and lighting."]})}),(0,s.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800 font-medium",children:["\uD83D\uDCA1 ",(0,s.jsx)("strong",{children:"94%"})," accuracy rate in facial recognition"]})})]})]},"step-3")]}),(0,s.jsxs)("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-200",children:[(0,s.jsx)(l.$,{variant:"outline",onClick:M,disabled:1===b,className:"px-6",children:"Back"}),(0,s.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,s.jsxs)(l.$,{onClick:F,disabled:1===b&&(!f.age||!(e=>{let t=parseInt(e);return t>=18&&t<=99})(f.age))||2===b&&!f.location||3===b&&!f.photo,className:"w-full bg-gradient-to-r from-pink-500 to-orange-500 hover:from-pink-600 hover:to-orange-600 text-white font-semibold",children:[3===b?"Start Search":"Next",(0,s.jsx)(u.A,{className:"ml-2 w-4 h-4"})]}),3===b&&(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)("span",{className:"text-red-500 font-semibold",children:"AI facial recognition with 94% accuracy rate"})})})]})]}),2===b&&(0,s.jsxs)("div",{className:"text-center mt-4",children:[(0,s.jsx)("div",{className:"text-yellow-400 text-lg",children:"⭐⭐⭐⭐⭐"}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"text-red-500 font-semibold",children:"4.5/5"}),(0,s.jsx)("span",{className:"text-gray-500",children:" based on 1572 reviews"})]})]})]},b)]})})})}function j(){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(b,{})})}}},e=>{e.O(0,[356,40,909,331,969,441,255,358],()=>e(e.s=5707)),_N_E=e.O()}]);